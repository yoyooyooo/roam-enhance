!function(){"use strict";new MutationObserver(((t,o)=>{for(let o of t)if("childList"===o.type){[...document.querySelectorAll("button")].forEach((t=>{t.setAttribute("content",t.innerText)}))}})).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),function(t,o,n={}){const{maxCount:e=5}=n;window.roamEnhance.loaded.add(t),function(t,o="",n=10){let e=0;!async function t(i){var a,c;try{await i()}catch(r){console.log(`[${o}] error`,{e:r}),e<n?setTimeout((()=>(e++,t(i))),2e3):(console.log(`[${o}] error 超出次数加载失败，停止重试`),null===(c=null===(a=window.roam42)||void 0===a?void 0:a.help)||void 0===c||c.displayMessage(`${o}加载失败`,2e3))}}(t)}((async()=>{await o({ctx:window.roamEnhance._plugins[t],name:t,options:window.roamEnhance._plugins[t].options||{}})}),t,e)}("template-button",(async()=>{const t=await window.roam42.common.getPageUidByTitle("roam/enhance/template-button"),o=await window.roam42.common.getBlockInfoByUID(t,!0);let n=null==o?void 0:o[0][0].children;window.roamEnhance.contextMenu.registerMenu.add(((o,e,i)=>{"roam/enhance/template-button"===i.pageTitle&&o.unshift({text:"zh-CN"===navigator.language?"刷新配置":"refresh configure",onClick:async()=>{const o=await window.roam42.common.getBlockInfoByUID(t,!0);n=null==o?void 0:o[0][0].children}})})),document.addEventListener("click",(async t=>{const o=t.target;if("BUTTON"!==o.tagName||"bp3-button bp3-small dont-focus-block"!==o.className)return;let e;try{e=window.yoyo.utils.getBlockUidFromId(o.closest(".rm-block__input").id)}catch(t){return console.log(t),void window.roam42.help.displayMessage("找不到 uid",2e3)}e&&(null==n||n.forEach((async t=>{var n;if(o.innerText.trim()===t.string.trim()){const o=(null===(n=t.children)||void 0===n?void 0:n[0].string).match(/^\`\`\`javascript\n([\s\S]*)\`\`\`$/);if(o){const t=Object.getPrototypeOf((async function(){})).constructor;try{await new t("$currentUid",o[1])(e)}catch(t){console.log(t),window.iziToast.info({position:"topCenter",title:"zh-CN"===navigator.language?"执行错误":"task error"})}}}})))}))}))}();
