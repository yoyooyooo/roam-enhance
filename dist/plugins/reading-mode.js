!function(){"use strict";!function(e,n,o={}){const{maxCount:t=5}=o;window.roamEnhance.loaded.add(e),function(e,n="",o=10){let t=0;!async function e(i){var a,r;try{await i()}catch(s){console.log(`[${n}] error`,{e:s}),t<o?setTimeout((()=>(t++,e(i))),2e3):(console.log(`[${n}] error 超出次数加载失败，停止重试`),null===(r=null===(a=window.roam42)||void 0===a?void 0:a.help)||void 0===r||r.displayMessage(`${n}加载失败`,2e3))}}(e)}((async()=>{await n({ctx:window.roamEnhance._plugins[e],name:e,options:window.roamEnhance._plugins[e].options||{}})}),e,t)}("reading-mode",(({name:e})=>{let n=document.getElementById(e);n&&n.remove();const o=document.createElement("template");o.innerHTML=`<span id="toggle-${e}" title="当前:编辑模式" class="bp3-button bp3-minimal bp3-icon-edit pointer bp3-small"></span>`,o.content.firstChild.onclick=()=>{const o=n.classList;if(o.contains("bp3-icon-edit")){o.remove("bp3-icon-edit"),o.add("bp3-icon-disable"),n.title="当前:阅读模式(禁用编辑)";const t=document.createElement("style");t.id=e+"-css",t.innerText='.rm-block__input{pointer-events: none;}.rm-block-main {cursor: not-allowed;}.bp3-tag,.bp3-small,.bp3-popover-wrapper,.rm-paren,.block__input img {pointer-events: auto;cursor: pointer;}.rm-page-ref[data-tag^="."]{display:none !important;}',document.getElementsByTagName("head")[0].appendChild(t),window.roam42.help.displayMessage("切换至阅读模式",2e3)}else o.add("bp3-icon-edit"),o.remove("bp3-icon-disable"),document.getElementById(e+"-css").remove(),window.roam42.help.displayMessage("切换至编辑模式",2e3)},n=o.content.firstChild;const t=document.querySelector(".rm-topbar"),i=document.querySelector(".rm-topbar .bp3-popover-wrapper");t.insertBefore(n,i)}))}();
